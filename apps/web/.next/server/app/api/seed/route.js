(()=>{var e={};e.id=617,e.ids=[617],e.modules={6330:e=>{"use strict";e.exports=require("@prisma/client")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5511:e=>{"use strict";e.exports=require("crypto")},2984:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{GET:()=>l});var a=r(1271),i=r(1232),o=r(8079),n=r(1238),c=r(9201),d=r(8483);let u=async e=>{let t=e.headers.get("x-seed-token");if(!process.env.SEED_TOKEN||t!==process.env.SEED_TOKEN)return n.NextResponse.json({error:"Unauthorized"},{status:401});try{console.log("\uD83E\uDDF9 Nettoyage de la base de donn\xe9es..."),await c.z.stockMovement.deleteMany({}),await c.z.transaction.deleteMany({}),await c.z.auditLog.deleteMany({}),await c.z.batch.deleteMany({}),await c.z.product.deleteMany({}),await c.z.user.deleteMany({}),console.log("\uD83D\uDC64 Cr\xe9ation de l'Administrateur...");let e=process.env.ADMIN_EMAIL||"admin@ubuntu.com",t=process.env.ADMIN_PASSWORD||"admin123",r=await d.Ay.hash(t,10),s=await c.z.user.create({data:{name:"Administrateur",email:e,password:r,role:"ADMIN"}});console.log(`âœ… Admin cr\xe9\xe9: ${s.email} (ID: ${s.id})`);let a=[{name:"Doliprane 1000mg Cpr",dci:"Parac\xe9tamol",category:"Antalgique",sellingPrice:300,costPrice:185,minThreshold:20,batches:[{num:"BATCH-A-001",qty:100,exp:"2026-12-31"},{num:"BATCH-A-002",qty:50,exp:"2025-06-30"}]},{name:"Spasfon Lyoc",dci:"Phloroglucinol",category:"Antispasmodique",sellingPrice:2850,costPrice:1950,minThreshold:10,batches:[{num:"SPAS-2024-X",qty:30,exp:"2027-01-01"}]},{name:"Amoxicilline 500mg",dci:"Amoxicilline",category:"Antibiotique",sellingPrice:1500,costPrice:900,minThreshold:50,batches:[{num:"AMOX-B-99",qty:200,exp:"2026-05-20"}]},{name:"Vitamine C UPSA",dci:"Acide Ascorbique",category:"Vitamine",sellingPrice:1200,costPrice:750,minThreshold:15,batches:[{num:"VIT-C-22",qty:60,exp:"2025-11-15"}]},{name:"S\xe9rum Physiologique",dci:"Chlorure de Sodium",category:"Soins",sellingPrice:1500,costPrice:800,minThreshold:30,batches:[{num:"SER-PHY-01",qty:500,exp:"2028-01-01"}]}];for(let e of a){let t=await c.z.product.create({data:{name:e.name,dci:e.dci,category:e.category,minThreshold:e.minThreshold,sellingPrice:e.sellingPrice}});for(let r of e.batches){let a=await c.z.batch.create({data:{productId:t.id,batchNumber:r.num,quantity:r.qty,costPrice:e.costPrice,expiryDate:new Date(r.exp)}});await c.z.stockMovement.create({data:{type:"IN",quantity:r.qty,reason:"Initial Seed",userId:s.id,productId:t.id,batchId:a.id}})}}return n.NextResponse.json({success:!0,message:`${a.length} produits ins\xe9r\xe9s. Admin: ${s.email}`})}catch(e){return console.error("Erreur Seed:",e),n.NextResponse.json({error:e.message},{status:500})}},l="production"===process.env.VERCEL_ENV?async()=>new n.NextResponse(null,{status:404}):u,p=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/seed/route",pathname:"/api/seed",filename:"route",bundlePath:"app/api/seed/route"},resolvedPagePath:"C:\\Users\\tinkpad\\Desktop\\Mes Nouveaux Projets\\Sahel Ubuntu Pharm\\apps\\web\\app\\api\\seed\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:m,workUnitAsyncStorage:h,serverHooks:g}=p;function x(){return(0,o.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:h})}},7032:()=>{},408:()=>{},9201:(e,t,r)=>{"use strict";r.d(t,{z:()=>a});var s=r(6330);let a=globalThis.prisma??new s.PrismaClient({log:["error"]})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[207,48,483],()=>r(2984));module.exports=s})();