(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[907],{4236:(e,s,t)=>{Promise.resolve().then(t.bind(t,8908))},8908:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var a=t(4568),r=t(7620),l=t(3311),c=t(4028),n=t(4260),i=t(8282);let d=r.forwardRef((e,s)=>{let{transactionId:t,date:r,items:l,total:d,paymentMethod:x="ESP\xc8CES",cashierName:m="Caissier",pharmacyInfo:o={name:"CABINET UBUNTU",address:"Doumanzana, Rue 339, Porte 52, Bamako, Mali",phone:"+223 75 12 25 25",email:"contact@cabinet-ubuntu.com"}}=e,p=Math.round(d/1.18),h=d-p;return(0,a.jsxs)("div",{ref:s,className:"bg-white p-4 w-[80mm] max-w-[80mm] mx-auto text-xs font-mono text-black leading-tight print:w-full print:max-w-none print:mx-0 print:p-0",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center mb-3",children:[(0,a.jsx)(i.z,{className:"w-12 h-12 mb-2"}),(0,a.jsx)("h1",{className:"text-xl font-black uppercase tracking-wider mb-1",children:o.name}),(0,a.jsx)("p",{className:"text-[10px] uppercase text-center w-full",children:o.address}),(0,a.jsxs)("p",{className:"text-[10px]",children:["T\xe9l: ",o.phone]}),o.email&&(0,a.jsx)("p",{className:"text-[10px]",children:o.email}),o.taxId&&(0,a.jsx)("p",{className:"text-[10px] mt-1 font-bold",children:o.taxId})]}),(0,a.jsx)(n.w,{className:"my-2 border-black border-dashed"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-[10px] mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block text-gray-500",children:"DATE"}),(0,a.jsx)("span",{className:"font-bold",children:(0,c.GP)(r,"dd/MM/yyyy")})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"block text-gray-500",children:"HEURE"}),(0,a.jsx)("span",{className:"font-bold",children:(0,c.GP)(r,"HH:mm")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block text-gray-500",children:"TICKET #"}),(0,a.jsxs)("span",{className:"font-bold",children:["#",t.slice(-6).toUpperCase()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"block text-gray-500",children:"CAISSIER"}),(0,a.jsx)("span",{className:"font-bold uppercase",children:m})]})]}),(0,a.jsx)(n.w,{className:"my-2 border-black border-dashed"}),(0,a.jsxs)("table",{className:"w-full mb-2 text-[10px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-black border-dashed",children:[(0,a.jsx)("th",{className:"py-1 text-left w-[45%]",children:"ARTICLE"}),(0,a.jsx)("th",{className:"py-1 text-center w-[15%]",children:"QT\xc9"}),(0,a.jsx)("th",{className:"py-1 text-right w-[20%]",children:"P.U."}),(0,a.jsx)("th",{className:"py-1 text-right w-[20%]",children:"TOTAL"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-dotted divide-gray-300",children:l.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"py-1 pr-1 align-top font-medium uppercase truncate max-w-[30mm]",children:e.name}),(0,a.jsx)("td",{className:"py-1 text-center align-top",children:e.quantity}),(0,a.jsx)("td",{className:"py-1 text-right align-top",children:e.price.toLocaleString()}),(0,a.jsx)("td",{className:"py-1 text-right align-top font-bold",children:(e.price*e.quantity).toLocaleString()})]},s))})]}),(0,a.jsx)(n.w,{className:"my-2 border-black border-dashed"}),(0,a.jsxs)("div",{className:"space-y-1 mb-3 pr-1",children:[(0,a.jsxs)("div",{className:"flex justify-between text-[10px]",children:[(0,a.jsx)("span",{children:"Total HT"}),(0,a.jsxs)("span",{children:[p.toLocaleString()," F"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-[10px]",children:[(0,a.jsx)("span",{children:"TVA (18%)"}),(0,a.jsxs)("span",{children:[h.toLocaleString()," F"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-end mt-2 pt-2 border-t border-black border-dashed",children:[(0,a.jsx)("span",{className:"font-bold text-sm",children:"NET \xc0 PAYER"}),(0,a.jsxs)("span",{className:"font-black text-xl",children:[d.toLocaleString()," ",(0,a.jsx)("span",{className:"text-sm font-normal",children:"FCFA"})]})]})]}),(0,a.jsxs)("div",{className:"border border-black p-2 mb-4 text-center",children:[(0,a.jsx)("p",{className:"text-[10px] uppercase mb-1",children:"Mode de R\xe8glement"}),(0,a.jsx)("p",{className:"font-bold text-sm uppercase",children:x||"ESP\xc8CES"})]}),(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("p",{className:"font-bold text-sm uppercase",children:"MERCI DE VOTRE VISITE !"}),(0,a.jsx)("p",{className:"text-[10px] italic",children:"Les m\xe9dicaments ne sont ni repris ni \xe9chang\xe9s."}),(0,a.jsx)("p",{className:"text-[10px] italic",children:"Bon r\xe9tablissement."}),(0,a.jsx)("div",{className:"mt-4 flex justify-center opacity-80",children:(0,a.jsx)("div",{className:"h-10 w-full max-w-[180px] flex items-end justify-center space-x-[2px] bg-transparent overflow-hidden",children:Array.from({length:40}).map((e,s)=>(0,a.jsx)("div",{className:"bg-black",style:{height:"".concat(Math.random()>.5?"100%":"70%"),width:"".concat(Math.random()>.7?"3px":"1px")}},s))})}),(0,a.jsx)("p",{className:"text-[8px] mt-1 tracking-widest",children:t.toUpperCase()}),(0,a.jsx)("p",{className:"mt-3 text-[8px] text-gray-400",children:"Powered by Sahel Ubuntu Pharm"})]})]})});d.displayName="Receipt";var x=t(8008);function m(){let e=(0,l.useParams)().id,[s,t]=(0,r.useState)(null),[c,n]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async function(){try{let s=await fetch("/api/transactions"),a=(await s.json()).find(s=>s.id===e);a&&t(a)}catch(e){console.error(e)}finally{n(!1)}})()},[e]),(0,r.useEffect)(()=>{s&&!c&&setTimeout(()=>{window.print()},500)},[s,c]),c)?(0,a.jsxs)("div",{className:"flex h-screen items-center justify-center",children:[(0,a.jsx)(x.A,{className:"animate-spin mr-2"})," Chargement du Ticket..."]}):s?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4 print:p-0 print:bg-white",children:[(0,a.jsx)("button",{onClick:()=>window.close(),className:"fixed top-4 left-4 bg-black text-white px-4 py-2 rounded print:hidden",children:"Fermer"}),(0,a.jsx)(d,{transactionId:s.id,date:new Date(s.date),items:s.items,total:s.amount,paymentMethod:s.paymentMethod,cashierName:"Admin"})]}):(0,a.jsx)("div",{className:"p-10 text-center text-red-500",children:"Transaction introuvable."})}},8282:(e,s,t)=>{"use strict";t.d(s,{z:()=>r});var a=t(4568);t(7620);let r=e=>{let{className:s="w-12 h-12"}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:[(0,a.jsx)("circle",{cx:"50",cy:"50",r:"45",stroke:"currentColor",strokeWidth:"8",className:"text-black"}),(0,a.jsx)("path",{d:"M50 20V80 M20 50H80",stroke:"currentColor",strokeWidth:"12",strokeLinecap:"round",className:"text-black"}),(0,a.jsx)("circle",{cx:"35",cy:"35",r:"4",fill:"currentColor",className:"text-black"}),(0,a.jsx)("circle",{cx:"65",cy:"35",r:"4",fill:"currentColor",className:"text-black"}),(0,a.jsx)("circle",{cx:"65",cy:"65",r:"4",fill:"currentColor",className:"text-black"}),(0,a.jsx)("circle",{cx:"35",cy:"65",r:"4",fill:"currentColor",className:"text-black"})]})}},4260:(e,s,t)=>{"use strict";t.d(s,{w:()=>n});var a=t(4568),r=t(7620),l=t(4861),c=t(3772);let n=r.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:n=!0,...i}=e;return(0,a.jsx)(l.b,{ref:s,decorative:n,orientation:r,className:(0,c.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...i})});n.displayName=l.b.displayName},3772:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l});var a=t(5928),r=t(6564);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}}},e=>{var s=s=>e(e.s=s);e.O(0,[350,771,587,855,358],()=>s(4236)),_N_E=e.O()}]);